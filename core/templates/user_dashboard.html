{% extends 'base.html' %}
{% load static %}

{% block title %}
    DASHBOARD
{% endblock %}

{% block content %}
<div class="dashboard_content">
  <div class="dash_warper">

    <div class="dashboard_top">
      <div class="dash_top_left">
        {% if request.user.profile_pic %}
          <img src="{{ request.user.profile_pic.url }}" alt="Leader Pic">
        {% else %}
          <p><em>No profile picture uploaded.</em></p>
        {% endif %}
      </div>

      <div class="dash_top_right">
        <h2>Welcome, {{ request.user.username }} (Member)</h2>
        <div class="details">
          <div class="details_top">
            <p>Department: <span style="color: #1cacff; font-weight: 600;">{{ request.user.department }}</span></p>
            <p>Session: <span style="color: #1cacff; font-weight: 600;">{{ request.user.session }}</span></p>
            <p>Wing: <span style="color: #1cacff; font-weight: 600;">{{ request.user.wing }}</span></p>
          </div>
          <!-- Optional Stats (Uncomment if needed)
          <div class="details_bottom">
            <p>Total Approved Members: <span>{{ approved_members|length }}</span></p>
            <p>Total Pending Members: <span>{{ pending_members|length }}</span></p>
          </div>
          -->
        </div>
      </div>
    </div>

    <div class="dash_main" style="flex-direction: column; gap: 20px; display: flex;align-items: center;justify-content: center;">
     
      {% if lessons %}
  <div class="dashboard_lessons" style="margin-top: 40px;">
    <h2 style="text-align: center;">Learning Materials for {{ request.user.wing }} Wing</h2>
    <div class="lessons_grid" style="display: flex; flex-wrap: wrap;align-items: center; justify-content: center;
    margin-top: 30px; gap: 20px; ">

      {% for lesson in lessons %}
        <div class="lesson_card" style="border: 1px solid #ddd; padding: 15px; border-radius: 8px; text-align: center; width: 300px;">
          <img src="{{ lesson.image.url }}" alt="{{ lesson.title }}" style="width: 100%;aspect-ratio: 4/3; border-radius: 5px;">
          <h3 style="font-family: poppins; font-weight: 500;  margin-top: 10px;">{{ lesson.title }}</h3>
          {% if lesson.content_link %}
            <a href="{{ lesson.content_link }}" target="_blank" style="display: inline-block; margin-top: 8px; color: white; background-color: #1cacff; padding: 6px 12px; border-radius: 5px; text-decoration: none;">View Material</a>
          {% endif %}
        </div>
      {% endfor %}

    </div>
  </div>
{% else %}
  <p style="text-align: center; margin-top: 40px; color: gray;">
    No learning materials available for your wing yet.
  </p>
{% endif %}
             <form action="{% url 'logout' %}" method="post">
    {% csrf_token %}
    <button type="submit" class="join_now" style=" background: none; border-radius: 5px;
        padding: 3px 7px; font-weight: 600;  color: rgb(255, 23, 23);"
    ">
       Logout
    </button>
  </form>
    </div>

  </div>
</div>
{% endblock %}


  
















<p>Your Wing: {{ request.user.wing }}</p>
<h2>ðŸ‘‹ Welcome, {{ request.user.username }}</h2>
{% if request.user.profile_pic %}
  <img src="{{ request.user.profile_pic.url }}" style="width: 100px; height: 100px; border-radius: 50%;" alt="Profile Pic">
{% else %}
  <p>No profile picture uploaded.</p>
{% endif %}
<form method="post" action="{% url 'logout' %}">
    {% csrf_token %}
    <button type="submit">Logout</button>
</form>
